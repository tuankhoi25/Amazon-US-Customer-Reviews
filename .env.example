# Minio Configuration
## Root user and password for Minio
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
## Minio server configuration
MINIO_REGION=us-east-1

# AWS S3 endpoint for Spark to connect to Minio
AWS_S3_ENDPOINT=http://minio:9000

# Nessie Catalog endpoint for Spark to connect to Nessie
NESSIE_URI=http://nessie:19120/api/v2

# Location where files will be written when creating new tables
WAREHOUSE=s3a://warehouse/


# PostgreSQL Configuration
## Root user and password for PostgreSQL
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=oltp
POSTGRES_DB_FOR_NESSIE=nessie
POSTGRES_DB_FOR_METABASE=metabaseappdb


# Nessie Configuration
NESSIE_VERSION_STORE_TYPE=JDBC2
NESSIE_VERSION_STORE_PERSIST_JDBC_DATASOURCE=postgresql



# Spark Configuration
## Spark cluster
SPARK_MASTER=spark://spark-master:7077

## Jars & Extensions
SPARK_JARS_PACKAGES=["org.apache.iceberg:iceberg-spark-runtime-3.5_2.12:1.9.2", "org.projectnessie.nessie-integrations:nessie-spark-extensions-3.5_2.12:0.104.3","org.apache.iceberg:iceberg-aws-bundle:1.9.2","org.postgresql:postgresql:42.5.0"]
SPARK_SQL_EXTENSIONS=["org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions","org.projectnessie.spark.extensions.NessieSparkSessionExtensions"]

## Nessie Catalog
SPARK_SQL_CATALOG_NESSIE=org.apache.iceberg.spark.SparkCatalog
SPARK_SQL_CATALOG_NESSIE_URI=${NESSIE_URI}
SPARK_SQL_CATALOG_NESSIE_CLIENT__API__VERSION=2
SPARK_SQL_CATALOG_NESSIE_REF=main
SPARK_SQL_CATALOG_NESSIE_AUTHENTICATION_TYPE=NONE
SPARK_SQL_CATALOG_NESSIE_CATALOG__IMPL=org.apache.iceberg.nessie.NessieCatalog
SPARK_SQL_CATALOG_NESSIE_S3_ENDPOINT=${AWS_S3_ENDPOINT}
SPARK_SQL_CATALOG_NESSIE_WAREHOUSE=${WAREHOUSE}
SPARK_SQL_CATALOG_NESSIE_S3_PATH__STYLE__ACCESS=true
SPARK_SQL_CATALOG_NESSIE_S3_ACCESS__KEY__ID=${MINIO_ROOT_USER}
SPARK_SQL_CATALOG_NESSIE_S3_SECRET__ACCESS__KEY=${MINIO_ROOT_PASSWORD}
SPARK_SQL_CATALOG_NESSIE_IO__IMPL=org.apache.iceberg.aws.s3.S3FileIO

## Iceberg
SPARK_SQL_ICEBERG_MERGE__SCHEMA=true

## Resources
SPARK_EXECUTOR_MEMORY=2g
SPARK_DRIVER_MEMORY=2g
SPARK_EXECUTOR_CORES=2